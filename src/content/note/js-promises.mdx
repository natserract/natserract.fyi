---
title: JS Promises
date: 2024-06-04
keywords: javascript, promise, async await, concurrency, react
---

## Controling concurrency
Just queue all of your promises into a single instance of run queue at the same priority and set a reasonable concurrency width (like 20 to 30) and let it run. If you’ve got some long running queries, I suggest using two instances of run queue (don’t use different priorities in this case) and keep the faster ones on one queue and the slower ones on a different one. But, don’t bother with that in the beginning. Just throw them all on one queue, play with concurrency count and see what happens.

- Run multiple tasks at a time with queue https://github.com/iarna/run-queue

## React.Suspense with Promise

React can render promise with suspense

```tsx
<Suspense fallback="...">
  {new Promise((resolve) => {
    setTimeout(() => resolve('World'), 1000)
  })}
</Suspense>
```

## Javascript promises in depth
- PouchDB. We have a problem with promises
 https://pouchdb.com/2015/05/18/we-have-a-problem-with-promises.html

- Promise methods (.all, .any, .finally, .race) https://dev.to/swarnaliroy94/methods-of-promise-all-any-finally-o2e

## Error rejections
Unhandled promise rejections https://jakearchibald.com/2023/unhandled-rejections/

## Great tools
- [Effect ts](https://effect.website/), better error handling, safe types, nice control flow https://effect.website/docs/other/effect-vs-promise
